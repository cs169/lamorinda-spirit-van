<!-- Display notifications if exists -->
<% if flash[:notice].present? %>
  <div class="alert alert-success">
    <%= flash[:notice] %>
  </div>
<% end %>

<div class="card" style="height: 100%;">
  <div class="card-body p-0" style="overflow-y: auto;">
    <table class="table table-striped table-bordered table-hover mb-0 small">
      <thead class="table-dark" style="position: sticky; top: 0; z-index: 1;">
        <tr class="border-0">
          <th class="border-0">Day</th>
          <th class="border-0">Date</th>
          <th class="border-0">Driver</th>
          <th class="border-0">Van</th>
          <th class="border-0">Passenger Name & Phone</th>
          <th class="border-0">Passenger Address</th>
          <th class="border-0">Destination</th>
          <th class="border-0">Notes to Driver</th>
          <th class="border-0">Driver Initials</th>
          <th class="border-0">Hours</th>
          <th class="border-0">Amount Paid</th>
          <th class="border-0">Ride Count</th>
          <th class="border-0">Notes (Date Reserved)</th>
          <th class="border-0">Confirmed with Passenger</th>
          <th class="border-0">Driver Email</th>
          <th class="border-0" colspan="2">Actions</th>
        </tr>
      </thead>

      <tbody>
        <% @rides.each do |ride| %>
          <tr class="clickable-row" data-href="<%= edit_ride_path(ride) %>" style="cursor: pointer;">
            <td><%= ride.day %></td>
            <td><%= ride.date %></td>
            <td><%= ride.driver %></td>
            <td><%= ride.van %></td>
            <td><%= ride.passenger_name_and_phone %></td>
            <td><%= ride.passenger_address %></td>
            <td><%= ride.destination %></td>
            <td><%= ride.notes_to_driver %></td>
            <td><%= ride.driver_initials %></td>
            <td><%= ride.hours %></td>
            <td><%= number_to_currency(ride.amount_paid) %></td>
            <td><%= ride.ride_count %></td>
            <td><%= ride.notes_date_reserved %></td>
            <td><%= ride.confirmed_with_passenger %></td>
            <td><%= ride.driver_email %></td>
            
            <!-- Actions should remain separate -->
            <td><%= link_to 'Edit', edit_ride_path(ride), class: "btn btn-sm btn-primary" %></td>
            <td>
              <%= link_to 'Delete', ride,
                  data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' },
                  class: "btn btn-sm btn-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="mt-2">
  Showing <%= @rides.count %> results
</div>