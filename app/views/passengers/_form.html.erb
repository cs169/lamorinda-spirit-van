<!-- app/views/passengers/_form.html.erb -->

<!-- Display validation errors -->
<% if @passenger.errors.any? %>
  <div class="alert alert-danger">
    <h4>
      There are <%= pluralize(@passenger.errors.count, "error") %> preventing this form from saving:
    </h4>
    <ul>
      <% @passenger.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!-- Display success message if available -->
<% if flash[:notice].present? %>
  <div class="alert alert-success">
    <%= flash[:notice] %>
  </div>
<% end %>

<%= form_with(model: @passenger, local: true) do |form| %>
  <div class="row">
    <!-- LEFT COLUMN -->
    <div class="col-md-6">
      <!-- Full Name -->
      <div class="mb-3">
        <%= form.label :full_name, raw("Full Name <span class='text-danger'>*</span>"), class: "form-label" %>
        <%= form.text_field :full_name, class: "form-control", required: true %>
      </div>

      <!-- First Name -->
      <div class="mb-3">
        <%= form.label :first_name, raw("First Name <span class='text-danger'>*</span>"), class: "form-label" %>
        <%= form.text_field :first_name, class: "form-control", required: true %>
      </div>

      <!-- Last Name -->
      <div class="mb-3">
        <%= form.label :last_name, raw("Last Name <span class='text-danger'>*</span>"), class: "form-label" %>
        <%= form.text_field :last_name, class: "form-control", required: true %>
      </div>

      <!-- Address -->
      <div class="mb-3">
        <%= form.label :address, raw("Address <span class='text-danger'>*</span>"), class: "form-label" %>
        <%= form.text_field :address, class: "form-control", required: true %>
      </div>

      <!-- City -->
      <div class="mb-3">
        <%= form.label :city, raw("City <span class='text-danger'>*</span>"), class: "form-label" %>
        <%= form.text_field :city, class: "form-control", required: true %>
      </div>

      <!-- State -->
      <div class="mb-3">
        <%= form.label :state, raw("State <span class='text-danger'>*</span>"), class: "form-label" %>
        <%= form.select :state,
            options_for_select(["CA"], @passenger.state),
            {}, class: "form-select", required: true
        %>
      </div>

      <!-- Zip -->
      <div class="mb-3">
        <%= form.label :zip, "Zip", class: "form-label" %>
        <%= form.text_field :zip, class: "form-control" %>
      </div>

      <!-- Birthday -->
      <div class="mb-3">
        <%= form.label :birthday, "Birthday", class: "form-label" %>
        <%= form.date_field :birthday, class: "form-control" %>
      </div>

      <!-- Race -->
      <div class="mb-3">
        <%= form.label :race, "Race", class: "form-label" %>
        <%= form.number_field :race, class: "form-control" %>
      </div>

      <!-- Hispanic -->
      <div class="mb-3">
        <%= form.label :hispanic, "Hispanic", class: "form-label" %>
        <%= form.text_field :hispanic, class: "form-control" %>
      </div>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="col-md-6">
      <!-- Notes -->
      <div class="mb-3">
        <%= form.label :notes, "Notes", class: "form-label" %>
        <%= form.text_area :notes, rows: 3, class: "form-control" %>
      </div>

      <!-- Phone -->
      <div class="mb-3">
        <%= form.label :phone, "Phone", class: "form-label" %>
        <%= form.text_field :phone, class: "form-control" %>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <%= form.label :email, "Email", class: "form-label" %>
        <%= form.email_field :email, class: "form-control" %>
      </div>

      <!-- Alternative Phone -->
      <div class="mb-3">
        <%= form.label :alternative_phone, "Alternative Phone", class: "form-label" %>
        <%= form.text_field :alternative_phone, class: "form-control" %>
      </div>

      <!-- Audit -->
      <div class="mb-3">
        <%= form.label :audit, "Audit", class: "form-label" %>
        <%= form.text_area :audit, rows: 3, class: "form-control" %>
      </div>

      <!-- Date Registered -->
      <div class="mb-3">
        <%= form.label :date_registered, "Date Registered", class: "form-label" %>
        <%= form.date_field :date_registered, class: "form-control" %>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex justify-content-between mt-4">
    <%= link_to 'Back', passengers_path, class: "btn btn-secondary" %>

    <%= form.submit @passenger.new_record? ? "Create Passenger" : "Update Passenger", 
                    class: @passenger.new_record? ? "btn btn-success" : "btn btn-primary" %>
  </div>
<% end %>
